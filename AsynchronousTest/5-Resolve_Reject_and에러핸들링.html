<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>

        /*
        const delayAdd = (index, cb, errorCb) => {
            setTimeout(()=>{
                if(index > 10){
                    errorCb(`${index}는 10보다 클 수 없다.`)
                    return;
                }
                console.log(index);
                cb(index + 1);
            }, 1000);
        };

        delayAdd(15, 
        (res)=>{
            console.log(res); //출력할 때 버퍼가있음.
        }, 

        (err)=>{
            console.log(err); //출력할 때 버퍼없음.

        }
        ); // 성공시와 실패시의 코드를 각각 인자로 전달

        */

        //프로미스 객체로 변경
        const delayAdd = (index) => {
            return new Promise((resolve, reject) => {
                setTimeout(()=>{
                if(index > 10){
                    reject(`${index}는 10보다 클 수 없다.`)
                    return;
                }
                console.log(index);
                resolve(index + 1);
            }, 1000)
        });
        };

        
        
        delayAdd(5)
            .then((res)=>{console.log(res)})
            .catch((err)=>{console.error(err)}) //catch: 실패했을 때만 이 메서드 
            .finally(()=>{console.log("Done!")});

    //async() await로 변경
    /*
    const wrap = async() =>{
        try{ 
        const result = await delayAdd(15);
        console.log(result);
        }

        catch(err){
        console.error(err);
        }

        finally{
            console.log("Done!");
        }
    } 

    wrap();
    */
    </script>
</body>
</html>